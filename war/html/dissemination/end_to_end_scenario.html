<!--  Creator Amelie GYRARD
Project in collaboration with INSIGHT Center for Data Analytics/National University of Galway, Ireland
Created: June 2016

IMPROVEMENTS TO DO:
 BUG to fix: Big space at the end of the document - How to remove it?
<p style="visibility: hidden" id="content_file"></p> 
Used to generate the zip file, otherwise the download does not appear

-->

<h1>End-to-End Scenario: <br/>
Designing Cross-Domain Semantic Web of Things applications</h1>
<div class="hero-unit">
<h3>Example: Deducing symptoms from a body thermometer and suggest home remedies.</h3>



<!-- 
Goal: Designing the naturopathy application based on a body thermometer sensor (See path A picture above) <br/>
Input: Data provided by a body thermometer (e.g., temperature 39 Degree Celcius)<br/>
Output: Deducing meaningful information from sensor data.  <br/>
 -->
 
<p> <img src="images/tutorial/Tutorial1_BodyThermometer_Naturopathy.png" alt="" width="1200" height="1200"/></p>

<h3>Introduction: Develop the IoT application with Java and Jena</h3>

<!--<a href="https://www.youtube.com/watch?v=xrdYuEJ8Wpk">A video has been recorded (V1)</a><br/>   -->



<a href="../tutorial/M3ApplicationTutorial.zip">
IMPORTANT: Download the Java application skeleton to ease the development of a semantic-based IoT application.</a>
<br/>IMPORTANT: You can follow the <a href="../tutorial/ISWC2016Tutorial_PartV_Amelie_Gyrard_HandsOnSessionV3.pdf">slides explaining the Java code skeleton</a> to understand better this tutorial.<br/>
<a href="https://www.youtube.com/watch?v=BMP8CXtXzGo">A video has been recorded</a> as well<br/>
<!--  TO DO: Generate a JAR file with the skeleton to load the template (STEP 1) + RDF data (STEP 2) <br/>
TO DO: Generate generic Web service?<br/>
-->
<br/>
<h3>STEP 1: Generating IoT application template</h3>
In this tutorial, we are using the pre-defined <b>"Body Temperature, Symptoms and Home Remedies"</b> template that you can download below
<br/>or using web services 
(<a href="../documentation/SWoTGeneratorDocumentation.pdf">See SWoT generator documentation - Section 5</a>).<br/>
<br/>
<!--  Back-END Tip: We are using the SWoT generator in the back-end. <br/> -->
	<ol>
		
		<li>Choose the hardware sensor that will provide data 
		<br/>In this tutorial, choose <b>"Thermometer"</b> in the drop-down list: <select id="sensor" ></select> </li>
		<li>Choose the domain where is deployed your sensor.
		<br/>In this tutorial, choose <b>"Healthcare"</b> in the drop-down list: <select id="domain" ></select> </li>
		<li>Click on this button to find pre-defined IoT application templates: <button type="button" onclick="searchIoTApplicationTemplate();">Search IoT Application Template</button> </li>
		<li>Choose the <b>"Body Temperature, Symptoms and Home Remedies"</b> application template: <select  width="300" style="width: 300px" id="iot_application_template" > </select>	</li>
		<li><button type="button" onclick="generateIoTApplicationTemplate();">Generate the IoT application template (ZIP file)</button></li>
			
				</ol>
		 <div id="generate_iot_application_template"></div>	

<br/>		
<h3>STEP 2: Semantically annotating data with RDF</h3>

Input: Sensor data (Current format supported: SenML/XML data), template that has just been downloaded<br/>
Output: RDF Data semantically annotated with M3 ontology, W3C SSN, etc. (<a href="../?p=documentation">more information here</a>)
<br/>Tip: Use Chrome to get the result as text :-)<div id="res_convert_xml"></div>

<br/>
OPTION 1: Use the default data suggested<br/>
OPTION 2: Copy/paste your SenML/XML data (need to be surrounded by zone balise):<br/><br/>
 <textarea class="form-control" rows="10"  id="senmlText">
<zone name="health">
<senml bn="urn:body:uuid:c68ad78b-09eb-4303-ae3c-d5d23149ee96">
<e n="temperature" t="1374069830362" u="Cel" v="38.7"/>
</senml></zone>

</textarea>
 
<input type="button" class="btn2" value="SenML/XML to RDF Converter" onclick="convertSenMLToRDFFormat('xml');"/>



<br/>
<h3>STEP 3: Executing the reasoning engine to deduce meaningful information</h3>
 Click on this button to execute the reasoning engine: 
 <input type="button" class="btn" value="Execute the reasoning engine to deduce meaningful information" onclick='request(displayGenericSparqlResult, "naturopathy/sick", "result_reasoning_engine");'/>
 <br/> The <a href="http://sensormeasurement.appspot.com/naturopathy/sick">result</a> is parsed in Javascript.
<br/>Result (Deduce Column) provided by the reasoning engine:
<br/><div id="result_reasoning_engine"></div>

<!--  TO DO: Button to run the reasoning engine - web services.  -->
<br/>
<h3>STEP 4: Executing the query engine to get suggestions</h3>

 Click on this button to execute the query engine: 
 <input type="button" class="btn" value="Execute the query engine to get suggestions" onclick='request(displayGenericSparqlResult, "naturopathy/sick", "result_query_engine");'/>
 <br/> The <a href="http://sensormeasurement.appspot.com/naturopathy/sick">result</a> is parsed in Javascript.
<br/>Result (Suggest Column) provided by the query engine:
<br/><div id="result_query_engine"></div>

<!--  TO DO: Button to run the query engine - web services.-->
	
<br/>
<h3>STEP 5: Displaying the result in the user interface</h3>
The <a href="http://sensormeasurement.appspot.com/naturopathy/sick">result</a> produced by the execution of the reasoning and query engines for this 
specific example can be parsed in Javascript to be displayed in a user-friendly interface 
(e.g., replacing text by pictures). <br/>

Display result as a test:<br/>
<input type="button" class="btn" value="Get and display knowledge deduced (STEP 3) and suggestions (STEP 4)" onclick='request(displayGenericSparqlResult, "naturopathy/sick", "result_display");'/>
<br/><div id="result_display"></div>

<br/>
Do not hesitate to ask us questions, we will be delighted to guide you and improve our demos according to your needs <br/> <img src="./images/mail.png"/>


<p style="visibility: hidden" id="content_file"></p> 
<!--  IMPROVEMENTS TO DO:

<p style="visibility: hidden" id="content_file"></p> 
Used to generate the zip file, otherwise the download does not appear
-- BUG to fix: Big space at the end of the document - How to remove it?
-->
</div>

<script type="text/javascript">
$.getScript('javascript/swot.js',function(){
	//used by the swot generator
	request(displayResultResourceAvailableFromTemplateDataset, "/m3/getResourceTemplateDataset/", "sensor", "option");	
	request(displayResultDomainAvailableFromTemplateDataset, "/m3/getDomainTemplateDataset/", "domain", "option");	
	
});


